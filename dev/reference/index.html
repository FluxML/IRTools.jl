<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reference · IRTools</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">IRTools</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../dynamo/">Dynamo</a></li><li class="is-active"><a class="tocitem" href>Reference</a><ul class="internal"><li><a class="tocitem" href="#Reflection-1"><span>Reflection</span></a></li><li><a class="tocitem" href="#IR-Manipulation-1"><span>IR Manipulation</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Reference</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/MikeInnes/IRTools.jl/blob/master/docs/src/reference.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API-Reference-1"><a class="docs-heading-anchor" href="#API-Reference-1">API Reference</a><a class="docs-heading-anchor-permalink" href="#API-Reference-1" title="Permalink"></a></h1><p>This page provides a comprehensive reference for IRTools functionality.</p><h2 id="Reflection-1"><a class="docs-heading-anchor" href="#Reflection-1">Reflection</a><a class="docs-heading-anchor-permalink" href="#Reflection-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="IRTools.@code_ir" href="#IRTools.@code_ir"><code>IRTools.@code_ir</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia">@code_ir f(args...)</code></pre><p>Convenience macro similar to <code>@code_lowered</code> or <code>@code_typed</code>. Retrieves the IR for the given function call.</p><pre><code class="language-none">julia&gt; @code_ir gcd(10, 5)
1: (%1, %2, %3)
  %4 = %2 == 0
  br 4 unless %4
2: ...</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/reflection/reflection.jl#L109-L120">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.meta" href="#IRTools.meta"><code>IRTools.meta</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">meta(Tuple{...})</code></pre><p>Construct metadata for a given method signature. Metadata can then be used to construct <a href="@ref"><code>IR</code></a> or used to perform other reflection on the method.</p><p>See also <a href="@ref"><code>@meta</code></a>.</p><pre><code class="language-none">julia&gt; IRTools.meta(Tuple{typeof(gcd),Int,Int})
Metadata for gcd(a::T, b::T) where T&lt;:Union{Int128, Int16, Int32, Int64, Int8, UInt128, UInt16, UInt32, UInt64, UInt8} in Base at intfuncs.jl:31</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/reflection/reflection.jl#L26-L36">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.@meta" href="#IRTools.@meta"><code>IRTools.@meta</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia">@meta f(args...)</code></pre><p>Convenience macro for retrieving metadata without writing a full type signature.</p><pre><code class="language-none">julia&gt; IRTools.@meta gcd(10, 5)
Metadata for gcd(a::T, b::T) where T&lt;:Union{Int128, Int16, Int32, Int64, Int8, UInt128, UInt16, UInt32, UInt64, UInt8} in Base at intfuncs.jl:31</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/reflection/reflection.jl#L79-L86">source</a></section></article><h2 id="IR-Manipulation-1"><a class="docs-heading-anchor" href="#IR-Manipulation-1">IR Manipulation</a><a class="docs-heading-anchor-permalink" href="#IR-Manipulation-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="IRTools.IR" href="#IRTools.IR"><code>IRTools.IR</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">IR()
IR(metadata; slots = false)</code></pre><p>Represents a fragment of SSA-form code.</p><p>IR can be constructed from scratch, but more usually an existing Julia method is used as a starting point (see <a href="@ref"><code>meta</code></a> for how to get metadata for a method). The <code>slots</code> argument determines whether the IR preserves mutable variable slots; by default, these are converted to SSA-style variables.</p><p>As a shortcut, IR can be constructed directly from a type signature, e.g.</p><pre><code class="language-none">julia&gt; IR(typeof(gcd), Int, Int)
1: (%1, %2, %3)
  %4 = %2 == 0
  br 4 unless %4
2: ...</code></pre><p>See also: <a href="@code_ir"><code>code_ir</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L163-L183">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.Statement" href="#IRTools.Statement"><code>IRTools.Statement</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Statement(expr; type, line)
stmt(expr; type, line)</code></pre><p>Represents a single statement in the IR. The <code>expr</code> is a non-nested Julia expression (<code>Expr</code>). <code>type</code> represents the return type of the statement; in most cases this can be ignored and defaults to <code>Any</code>. <code>line</code> represents the source location of the statement; it is an integer index into the IR&#39;s line table.</p><p>As a convenience, if <code>expr</code> is already a statement, the new statement will inherit its type and line number.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L87-L98">source</a></section><section><div><pre><code class="language-none">Statement(stmt::Statement; expr, type, line)</code></pre><p>Copy of <code>stmt</code> with optionally updated fields.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L108-L112">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.Variable" href="#IRTools.Variable"><code>IRTools.Variable</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Variable(id::Integer)
var(id::Integer)</code></pre><p>Represents an SSA variable. Primarily used as an index into <code>IR</code> objects.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L11-L16">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.Branch" href="#IRTools.Branch"><code>IRTools.Branch</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Branch(condition::Any, block::Int, args::Vector{Any})</code></pre><p>Represents a generalized branching instruction, consisting of a <code>condition</code> (usually a <code>Variable</code> of boolean type), a target <code>block</code>, and a vector of <code>args</code> passed to the jump target.  There are three types of branches that exist by the following convention:</p><ul><li>A return branch is represented by <code>Branch(nothing, 0, [&lt;return value&gt;])</code>.</li><li>An unconditional branch is represented by <code>Branch(nothing, &lt;target&gt;, [&lt;optional arguments ...&gt;])</code></li><li>A conditional branch is represented by <code>Branch(&lt;condition&gt;, &lt;target&gt;, [&lt;optional arguments ...&gt;])</code></li></ul><p>See also: <a href="@branch!"><code>branch!</code></a>, <a href="@return"><code>return!</code></a>, <a href="@isreturn"><code>isreturn</code></a>, <a href="@isconditional"><code>isconditional</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L25-L38">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.BasicBlock" href="#IRTools.BasicBlock"><code>IRTools.BasicBlock</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">BasicBlock(stmts::Vector{Statement}, args::Vector{Any},
           argtypes::Vector{Any}, branches::Vector{Branch})
BasicBlock([stmts])</code></pre><p>Represents a <a href="https://en.wikipedia.org/wiki/Static_single_assignment_form#Converting_to_SSA">basic block</a> of code in SSA form.  A block consists of a list of statements, followed by optional branching instructions and arguments, with optional types.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L119-L128">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.arguments" href="#IRTools.arguments"><code>IRTools.arguments</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">arguments(br::Branch)</code></pre><p>Return the argument vector of the branch <code>br</code>.  (These are the arguments passed to a jumped-to block.)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L75-L80">source</a></section><section><div><pre><code class="language-none">arguments(bb::BasicBlock)</code></pre><p>Return the argument vector of the basic block <code>bb</code>.  (These are the arguments given by the branch to this block.)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L147-L152">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.argtypes" href="#IRTools.argtypes"><code>IRTools.argtypes</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">argtypes(bb::BasicBlock)</code></pre><p>Return the argument types of the basic block <code>bb</code>.  (These are the arguments given by the branch to this block.)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L155-L160">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.branches" href="#IRTools.branches"><code>IRTools.branches</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">branches(bb::BasicBlock)</code></pre><p>Return the vector of branching instructions in block <code>bb</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L140-L144">source</a></section><section><div><pre><code class="language-none">branches(b::Block, c::Block)</code></pre><p>Return the vector of all branches from block <code>b</code> to block <code>c</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L312-L316">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.isconditional" href="#IRTools.isconditional"><code>IRTools.isconditional</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">isconditional(br::Branch)</code></pre><p>Check whether <code>br</code> has the form of a conditional branch (see <a href="@Branch"><code>Branch</code></a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L63-L67">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.isreturn" href="#IRTools.isreturn"><code>IRTools.isreturn</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">isreturn(br::Branch)</code></pre><p>Check whether <code>br</code> has the form of a return branch (see <a href="@Branch"><code>Branch</code></a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L49-L53">source</a></section><section><div><pre><code class="language-none">isreturn(b::Block)</code></pre><p>Check whether the block <code>b</code> has a return branch.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L268-L272">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.returnvalue" href="#IRTools.returnvalue"><code>IRTools.returnvalue</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">returnvalue(b::Branch)</code></pre><p>Get the return value of <code>b</code> (the first argument of the branch).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L56-L60">source</a></section><section><div><pre><code class="language-none">returnvalue(b::Block)</code></pre><p>Retreive the return value of a block.</p><pre><code class="language-none">julia&gt; f(x) = 3x + 2;

julia&gt; IRTools.block(@code_ir(f(1)), 1)
1: (%1, %2)
  %3 = 3 * %2
  %4 = %3 + 2
  return %4

julia&gt; IRTools.returnvalue(ans)
%4</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L325-L340">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.returntype" href="#IRTools.returntype"><code>IRTools.returntype</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">returnvalue(b::Block)</code></pre><p>Retreive the return type of a block.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L346-L350">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.canbranch" href="#IRTools.canbranch"><code>IRTools.canbranch</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">canbranch(b::Block)</code></pre><p>Check whether adding a branch to block <code>b</code> will be valid (i.e, the last existing branch is not conditional).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L260-L265">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.explicitbranch!" href="#IRTools.explicitbranch!"><code>IRTools.explicitbranch!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">explicitbranch!(b::Block)
explicitbranch!(ir::IR)</code></pre><p>Convert implicit fallthroughs to explicit branches to the next block (these occur when the last branch in a block is conditional):</p><pre><code class="language-none">1: (%1, %2)
  %3 = %2 &lt; 0
  br 3 unless %3
2:
  return 0
3:
  return %2</code></pre><p>will become</p><pre><code class="language-none">1: (%1, %2)
  %3 = %2 &lt; 0
  br 3 unless %3
  br 2
2:
  return 0
3:
  return %2</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L275-L300">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.argument!" href="#IRTools.argument!"><code>IRTools.argument!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">argument!(block, [value, type]; at, insert)
argument!(ir, [value, type]; at, insert)</code></pre><p>Create a new argument for the given block / IR fragment, and return the variable representing the argument.</p><pre><code class="language-none">julia&gt; ir = IR();

julia&gt; argument!(ir)
%1

julia&gt; ir
1: (%1)</code></pre><p>The <code>at</code> keyword argument can be used to specify where the new argument should go; by default it is appended to the end of the argument list.</p><p>Unless <code>insert = false</code>, if there are branches to this block, they will be updated to pass <code>value</code> (<code>nothing</code> by default) as an argument (by default, <code>insert = true</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L353-L373">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.emptyargs!" href="#IRTools.emptyargs!"><code>IRTools.emptyargs!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">emptyargs!(b::Block)</code></pre><p>Delete all arguments from block <code>b</code>, and automatically remove them from all branches to this block.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L399-L404">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.deletearg!" href="#IRTools.deletearg!"><code>IRTools.deletearg!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">deletearg!(b::Block, i::Integer)</code></pre><p>Delete the <code>i</code>-th argument from block <code>b</code>, and automatically remove it from all branches to this block.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L413-L418">source</a></section><section><div><pre><code class="language-none">deletearg!(ir::IR, i)</code></pre><p>Delete the <code>i</code>-th argument from the first block of <code>ir</code>, and automatically remove it from all branches to this block.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L440-L445">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.block!" href="#IRTools.block!"><code>IRTools.block!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">block!(ir::IR)
block!(ir::IR, i)</code></pre><p>Insert a new block in <code>ir</code>.  If <code>i</code> is given, the block is inserted at this position, otherwise it is appended at the end.  Branches in all other blocks are updated to preserve the original behaviour.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L198-L205">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.deleteblock!" href="#IRTools.deleteblock!"><code>IRTools.deleteblock!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">deleteblock!(ir::IR, i)</code></pre><p>Delete the block at position <code>i</code>.  Branches in all other blocks are updated to preserve the original behaviour.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L220-L225">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.block" href="#IRTools.block"><code>IRTools.block</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">block(ir, i)</code></pre><p>Return the <code>i</code>-th <code>Block</code> of <code>ir</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L448-L452">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.blocks" href="#IRTools.blocks"><code>IRTools.blocks</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">blocks(ir)</code></pre><p>Return the list of blocks <code>Block</code> of <code>ir</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L456-L460">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.branch!" href="#IRTools.branch!"><code>IRTools.branch!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">branch!(b::Block, block, args...; unless = nothing)</code></pre><p>Add to block <code>b</code> a new branch to <code>block</code>, with arguments <code>args</code> and condition <code>unless</code>, and return it.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L503-L508">source</a></section><section><div><pre><code class="language-none">branch!(ir::IR, block, args...; unless = nothing)</code></pre><p>Add to the last block of <code>ir</code> a new branch to <code>block</code>, with arguments <code>args</code> and condition <code>unless</code>, and return it.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L517-L522">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.return!" href="#IRTools.return!"><code>IRTools.return!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">return!(block, x)
return!(ir, x)</code></pre><p>Add to <code>block</code> or the last block of <code>ir</code> a return branch with argument <code>x</code>, and return it.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L529-L534">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.successors" href="#IRTools.successors"><code>IRTools.successors</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">successors(b::Block)</code></pre><p>Returns all <code>Block</code>s from which you can reach <code>b</code> in one jump; basically, all x such that <code>branches(x, b)</code> is non-empty.  Implicit jumps by fall-through are noticed as well.</p><p>See: <a href="@predecessors"><code>predecessors</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L561-L568">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.predecessors" href="#IRTools.predecessors"><code>IRTools.predecessors</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">predecessors(b::Block)</code></pre><p>Returns all <code>Block</code>s of which <code>b</code> is a successor; basically, all x such that <code>branches(x, b)</code> is non-empty.  Implicit jumps by fall-through are noticed as well.</p><p>See: <a href="@successors"><code>successors</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L576-L583">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.keys" href="#Base.keys"><code>Base.keys</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">keys(ir)</code></pre><p>Return the variable keys for all statements defined in <code>ir</code>.</p><pre><code class="language-none">julia&gt; f(x) = 3x + 2;

julia&gt; ir = @code_ir f(1)
1: (%1, %2)
  %3 = 3 * %2
  %4 = %3 + 2
  return %4

julia&gt; keys(ir)
2-element Array{IRTools.Variable,1}:
 %3
 %4</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L586-L603">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.haskey" href="#Base.haskey"><code>Base.haskey</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">haskey(ir, var)</code></pre><p>Check whether the variable <code>var</code> was defined in <code>ir</code>.</p><pre><code class="language-none">julia&gt; f(x) = 3x + 2;

julia&gt; ir = @code_ir f(1)
1: (%1, %2)
  %3 = 3 * %2
  %4 = %3 + 2
  return %4

julia&gt; haskey(ir, var(3))
true

julia&gt; haskey(ir, var(7))
false</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L469-L487">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.push!" href="#Base.push!"><code>Base.push!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">push!(ir, x)</code></pre><p>Append the statement or expression <code>x</code> to the IR or block <code>ir</code>, returning the new variable. See also <a href="#Base.pushfirst!"><code>pushfirst!</code></a>, <a href="#Base.insert!"><code>insert!</code></a>.</p><pre><code class="language-none">julia&gt; ir = IR();

julia&gt; x = argument!(ir)
%1

julia&gt; push!(ir, xcall(:*, x, x))
%2

julia&gt; ir
1: (%1)
  %2 = %1 * %1</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L623-L640">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.pushfirst!" href="#Base.pushfirst!"><code>Base.pushfirst!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">pushfirst!(ir, x)</code></pre><p>Insert the expression or statement <code>x</code> into the given IR or block at the beginning, returning the new variable. See also <a href="#Base.push!"><code>push!</code></a>, <a href="#Base.insert!"><code>insert!</code></a>.</p><pre><code class="language-none">julia&gt; f(x) = 3x + 2
f (generic function with 1 method)

julia&gt; ir = @code_ir f(1)
1: (%1, %2)
  %3 = 3 * %2
  %4 = %3 + 2
  return %4

julia&gt; pushfirst!(ir, :(println(&quot;hello, world&quot;)))
%5

julia&gt; ir
1: (%1, %2)
  %5 = println(&quot;hello, world&quot;)
  %3 = 3 * %2
  %4 = %3 + 2
  return %4</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L672-L697">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.insert!" href="#Base.insert!"><code>Base.insert!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">insert!(ir, v, x)</code></pre><p>Insert the expression or statement <code>x</code> into the given IR, just before the variable <code>v</code> is defined, returning the new variable for <code>x</code>. See also <a href="@ref"><code>insertafter!</code></a>.</p><pre><code class="language-none">julia&gt; f(x) = 3x + 2
f (generic function with 1 method)

julia&gt; ir = @code_ir f(1)
1: (%1, %2)
  %3 = 3 * %2
  %4 = %3 + 2
  return %4

julia&gt; insert!(ir, IRTools.var(4), :(println(&quot;hello, world&quot;)))
%5

julia&gt; ir
1: (%1, %2)
  %3 = 3 * %2
  %5 = println(&quot;hello, world&quot;)
  %4 = %3 + 2
  return %4</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L700-L725">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.insertafter!" href="#IRTools.insertafter!"><code>IRTools.insertafter!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">insertafter!(ir, v, x)</code></pre><p>Insert the expression or statement <code>x</code> into the given IR, just before the variable <code>v</code> is defined, returning the new variable for <code>x</code>. See also <a href="#Base.insert!"><code>insert!</code></a>.</p><pre><code class="language-none">julia&gt; f(x) = 3x + 2
f (generic function with 1 method)

julia&gt; ir = @code_ir f(1)
1: (%1, %2)
  %3 = 3 * %2
  %4 = %3 + 2
  return %4

julia&gt; IRTools.insertafter!(ir, IRTools.var(4), :(println(&quot;hello, world&quot;)))
%5

julia&gt; ir
1: (%1, %2)
  %3 = 3 * %2
  %4 = %3 + 2
  %5 = println(&quot;hello, world&quot;)
  return %4</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L738-L763">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.permute!" href="#Base.permute!"><code>Base.permute!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">permute!(ir::IR, perm::AbstractVector)</code></pre><p>Permutes block order in-place, keeping track of internal references (like branch targets).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L780-L784">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.empty" href="#Base.empty"><code>Base.empty</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">empty(ir)</code></pre><p>Create an empty IR fragment based on the given IR. The line number table and any metadata are preserved from the original IR.</p><pre><code class="language-none">julia&gt; ir = empty(@code_ir gcd(10, 5))
1:

julia&gt; ir.meta
Metadata for gcd(a::T, b::T) where T&lt;:Union{Int128, Int16, Int32, Int64, Int8, UInt128, UInt16, UInt32, UInt64, UInt8} in Base at intfuncs.jl:31</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L766-L777">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="IRTools.Pipe" href="#IRTools.Pipe"><code>IRTools.Pipe</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Pipe(ir)</code></pre><p>In general, it is not efficient to insert statements into IR; only appending is fast, for the same reason as with <code>Vector</code>s.</p><p>For this reason, the <code>Pipe</code> construct makes it convenient to incrementally build an new IR fragment from an old one, making efficient modifications as you go.</p><p>The general pattern looks like:</p><pre><code class="language-none">pr = IRTools.Pipe(ir)
for (v, st) in pr
  # do stuff
end
ir = IRTools.finish(pr)</code></pre><p>Iterating over <code>pr</code> is just like iterating over <code>ir</code>, except that within the loop, inserting and deleting statements in <code>pr</code> around <code>v</code> is efficient. Later, <code>finish(pr)</code> converts it back to a normal IR fragment (in this case just a plain copy of the original).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MikeInnes/IRTools.jl/blob/93fa60dd2085fc9646e774f84f5b027ee7c8b611/src/ir/ir.jl#L820-L841">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../dynamo/">« Dynamo</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 18 June 2020 11:47">Thursday 18 June 2020</span>. Using Julia version 1.0.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
